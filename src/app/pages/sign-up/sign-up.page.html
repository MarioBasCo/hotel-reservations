<ion-content>

  <div class="back-circle"></div>

  <div class="ion-padding container_form">
    <form class="ion-padding card-form" [formGroup]="regForm" (ngSubmit)="guardar()">
      <div class="title">
        <ion-text>
          <h2>Registro</h2>
        </ion-text>
      </div>
      <fieldset class="ion-margin-top">
        <legend>Datos Personales</legend>
        <ion-item class="ion-margin-vertical" color="transparent">
          <ion-label position="stacked">Nombres</ion-label>
          <ion-icon name="person" slot="start" color="olive"></ion-icon>
          <ion-input type="text" placeholder="Ingrese sus nombres" formControlName="nombres">
          </ion-input>
        </ion-item>
        <div *ngFor="let item of errorMessage.nombres">
          <ng-container *ngIf="nombres?.hasError(item.type) && (nombres?.dirty || nombres?.touched)">
            <ion-note color="danger">* {{item.message}}</ion-note>
          </ng-container>
        </div>

        <ion-item class="ion-margin-vertical" color="transparent">
          <ion-label position="stacked">Apellidos</ion-label>
          <ion-icon name="person" slot="start" color="olive"></ion-icon>
          <ion-input type="text" placeholder="Ingrese sus apellidos" formControlName="apellidos">
          </ion-input>
        </ion-item>
        <div *ngFor="let item of errorMessage.apellidos">
          <ng-container *ngIf="apellidos?.hasError(item.type) && (apellidos?.dirty && apellidos?.touched)">
            <ion-note color="danger">* {{item.message}}</ion-note>
          </ng-container>
        </div>

        <ion-item class="ion-margin-vertical" color="transparent">
          <ion-label position="stacked">Celular</ion-label>
          <ion-icon name="call" slot="start" color="olive"></ion-icon>
          <ion-input placeholder="Ingrese su número celular" formControlName="celular" type="tel"
            maxlength="15"></ion-input>
        </ion-item>
        <div *ngFor="let item of errorMessage.celular">
          <ng-container *ngIf="celular?.hasError(item.type) && (celular?.dirty || celular?.touched)">
            <ion-note color="danger">* {{item.message}}</ion-note>
          </ng-container>
        </div>

        <ion-item class="ion-margin-vertical" color="transparent">
          <ion-label position="stacked">Fecha de Nacimiento</ion-label>
          <ion-icon name="calendar-clear" slot="start" color="olive"></ion-icon>
          <ion-input type="date" formControlName="fechaNaci" max="9999-12-31"></ion-input>
        </ion-item>
        <div *ngFor="let item of errorMessage.fechaNaci">
          <ng-container *ngIf="fechaNaci?.hasError(item.type) && (fechaNaci?.dirty || fechaNaci?.touched)">
            <ion-note color="danger">* {{item.message}}</ion-note>
          </ng-container>
        </div>
      </fieldset>


      <fieldset class="ion-margin-top">
        <legend>Datos De la Cuenta</legend>
        <ion-item class="ion-margin-vertical" color="transparent">
          <ion-label position="stacked">Usuario</ion-label>
          <ion-icon name="mail" slot="start" color="olive"></ion-icon>
          <ion-input type="email" formControlName="usuario" placeholder="Correo eléctronico">
          </ion-input>
        </ion-item>
        <div *ngFor="let item of errorMessage.usuario">
          <ng-container *ngIf="usuario?.hasError(item.type) && (usuario?.dirty || usuario?.touched)">
            <ion-note color="danger">* {{item.message}}</ion-note>
          </ng-container>
        </div>

        <ion-item class="ion-margin-vertical" color="transparent">
          <ion-label position="stacked">Contraseña</ion-label>
          <ion-icon slot="start" name="key" color="olive"></ion-icon>
          <ion-input [type]="showPassword ? 'text': 'password'" formControlName="password" placeholder="Contraseña"
            minlength="8">
          </ion-input>
          <ion-icon class="ion-align-self-center ion-text-end" color="marine" slot="end" [name]="passwordToggleIcon"
            (click)="togglePassword()"></ion-icon>
        </ion-item>
        <div *ngFor="let item of errorMessage.password">
          <ng-container *ngIf="password?.hasError(item.type) && (password?.dirty || password?.touched)">
            <ion-note color="danger" [innerHTML]="item.message"></ion-note>
          </ng-container>
        </div>
      </fieldset>

      <ion-button type="submit" class="btn-login" color="marine" expand="block" [disabled]="!regForm.valid">
        Registrarse
      </ion-button>
    </form>
  </div>

</ion-content>

<ion-footer class="ion-no-border">
  <ion-toolbar color="transparent">
    <p class="ion-text-center ion-padding-vertical register">¿Tienes una cuenta? Ingresa <a routerLink="/login">Aquí</a>
    </p>
  </ion-toolbar>
</ion-footer>